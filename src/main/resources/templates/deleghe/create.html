<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org" layout:decorate="~{fragments/base.html}">
<th:block th:include="fragments/base.html :: page">
    <div layout:fragment="content">
        <h2 class="text-xl" th:text="${assemblea.getNome()}"></h2>
        <div th:if="${error}" class="alert alert-error my-2">
            <p th:text="${error}"></p>
        </div>
        <div th:if="${!delegaExists.equals('')}">
            <p>Hai delegato
                <th:block th:text="${delegaExists}"></th:block>
            </p>
            <a th:if="${!assemblea.isNazionale()}" th:href="@{/assemblea/{id}/delega/annulla(id=${assemblea.getId()})}">
                <button class="btn btn-error">Elimina delega</button>
            </a>
            <a th:href="@{/assemblea/{id}(id=${assemblea.getId()})}">
                <button class="btn btn-outline">Torna all'assemblea</button>
            </a>
        </div>
        <form th:if="${delegaExists.equals('')}" th:object="${delega}" method="post">
            <input class="input w-full max-w-sm input-bordered my-2" list="partecipanti-list" th:field="*{tessera}" required placeholder="Seleziona chi vuoi delegare">
            <datalist id="partecipanti-list">
                <option
                        th:each="partecipante : ${partecipanti}"
                        th:value="${partecipante.getKey()}"
                        th:text="${partecipante.getValue() + ' - ' + partecipante.getKey()}">
                </option>
            </datalist>
            <button class="btn btn-primary">Crea delega</button>
            <a th:href="@{/assemblea/{id}(id=${assemblea.getId()})}">
                <button type='button' class="btn btn-outline">Annulla</button>
            </a>
        </form>
    </div>
</th:block>
</html>